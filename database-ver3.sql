CREATE DATABASE  IF NOT EXISTS `auction` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */ /*!80016 */;
USE `auction`;
-- MySQL dump 10.13  Distrib 8.0.18, for Win64 (x86_64)
--
-- Host: localhost    Database: auction
-- ------------------------------------------------------
-- Server version	8.0.18

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `automation`
--

DROP TABLE IF EXISTS `automation`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `automation` (
                              `id` int(11) NOT NULL AUTO_INCREMENT,
                              `user` int(11) NOT NULL,
                              `offer` float NOT NULL,
                              `product` int(11) NOT NULL,
                              PRIMARY KEY (`id`),
                              KEY `automation-user_idx` (`user`),
                              KEY `automation-product_idx` (`product`),
                              CONSTRAINT `automation-product` FOREIGN KEY (`product`) REFERENCES `product` (`id`),
                              CONSTRAINT `automation-user` FOREIGN KEY (`user`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=51 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `automation`
--

LOCK TABLES `automation` WRITE;
/*!40000 ALTER TABLE `automation` DISABLE KEYS */;
INSERT INTO `automation` VALUES (23,12,64,18),(28,12,30,18),(29,12,72,18),(30,3,65,18),(35,3,90,18),(36,3,85,18),(37,3,95,18),(38,12,90,18),(39,12,105,18),(40,3,104,18),(41,12,120,18),(44,3,150,18),(45,12,122,18),(46,3,125,18),(47,12,144,18),(48,3,300,32),(49,12,150,32),(50,12,170,32);
/*!40000 ALTER TABLE `automation` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `automation_AFTER_INSERT` AFTER INSERT ON `automation` FOR EACH ROW BEGIN
    declare user int;
    declare increment int;
    declare offer float;
    declare current float;
    set user = (select product.holder from product where product.id = new.product);
    if(user <> new.user) then
        begin
            set user = (select automation.user from automation where automation.user <> new.user and automation.product = new.product and automation.offer > new.offer order by automation.offer desc limit 1);
            set increment = (select product.increment from product where product.id = new.product);
            if (user) then
                begin
                    insert into history(user, offer, product) values(new.user, new.offer, new.product);
                    call UpdateHistory(new.user,new.product,new.offer);
                end;
            else
                begin
                    set current = (select product.current from product where product.id = new.product);
                    set offer = (select automation.offer from automation where automation.user <> new.user and automation.product = new.product and automation.offer >= current order by automation.offer limit 1);
                    if (offer) then
                        insert into history(user, offer, product) values(new.user, offer + increment, new.product);
                        call UpdateHistory(new.user,new.product,offer + increment);
                    else
                        insert into history(user, offer, product) values(new.user, current + increment, new.product);
                        call UpdateHistory(new.user,new.product,current + increment);
                    end if;
                end;
            end if;
        end;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `category`
--

DROP TABLE IF EXISTS `category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `category` (
                            `id` int(11) NOT NULL AUTO_INCREMENT,
                            `name` varchar(45) DEFAULT NULL,
                            `parent` int(11) DEFAULT NULL,
                            PRIMARY KEY (`id`),
                            KEY `category-category_idx` (`parent`),
                            CONSTRAINT `category-category` FOREIGN KEY (`parent`) REFERENCES `category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `category`
--

LOCK TABLES `category` WRITE;
/*!40000 ALTER TABLE `category` DISABLE KEYS */;
INSERT INTO `category` VALUES(1,'Mobile Phone', NULL),(2,'Laptop', NULL),(3,'Tablet', NULL),(4,'Smart Watch', NULL),(5,'E-reader', NULL);
/*!40000 ALTER TABLE `category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `history`
--

DROP TABLE IF EXISTS `history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `history` (
                           `id` int(11) NOT NULL AUTO_INCREMENT,
                           `user` int(11) NOT NULL,
                           `offer` float NOT NULL,
                           `product` int(11) NOT NULL,
                           `time` datetime DEFAULT CURRENT_TIMESTAMP,
                           PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=86 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `history`
--

LOCK TABLES `history` WRITE;
/*!40000 ALTER TABLE `history` DISABLE KEYS */;
INSERT INTO `history` (user,offer,product,time) VALUES
                                                    (16,1199000,1,'2021-12-3 20:47:00'),
                                                    (15,2199000,1,'2021-12-4 20:47:00'),
                                                    (14,3199000,1,'2021-12-5 20:47:00'),
                                                    (12,4199000,1,'2021-12-6 20:47:00'),
                                                    (2,5199000,1,'2021-12-7 20:47:00'),

                                                    (16,1189000,2,'2021-12-3 20:47:00'),
                                                    (15,1199000,2,'2021-12-4 20:47:00'),
                                                    (14,2199000,2,'2021-12-5 20:47:00'),
                                                    (12,3199000,2,'2021-12-6 20:47:00'),
                                                    (2,4199000,2,'2021-12-7 20:47:00'),

                                                    (16,3189000,3,'2021-12-3 20:47:00'),
                                                    (15,4199000,3,'2021-12-4 20:47:00'),
                                                    (14,5199000,3,'2021-12-5 20:47:00'),
                                                    (12,6199000,3,'2021-12-6 20:47:00'),
                                                    (2,7199000,3,'2021-12-7 20:47:00'),

                                                    (16,2500000,4,'2021-12-3 20:47:00'),
                                                    (15,3500000,4,'2021-12-4 20:47:00'),
                                                    (14,4500000,4,'2021-12-5 20:47:00'),
                                                    (12,5500000,4,'2021-12-6 20:47:00'),
                                                    (2,6500000,4,'2021-12-7 20:47:00'),

                                                    (16,8000000,5,'2021-12-3 20:47:00'),
                                                    (15,9000000,5,'2021-12-4 20:47:00'),
                                                    (14,10000000,5,'2021-12-5 20:47:00'),
                                                    (12,11000000,5,'2021-12-6 20:47:00'),
                                                    (2,12000000,5,'2021-12-7 20:47:00'),

                                                    (16,8000000,6,'2021-12-3 20:47:00'),
                                                    (15,9000000,6,'2021-12-4 20:47:00'),
                                                    (14,10000000,6,'2021-12-5 20:47:00'),
                                                    (12,11000000,6,'2021-12-6 20:47:00'),
                                                    (2,12000000,6,'2021-12-7 20:47:00'),

                                                    (16,8000000,7,'2021-12-3 20:47:00'),
                                                    (15,9000000,7,'2021-12-4 20:47:00'),
                                                    (14,10000000,7,'2021-12-5 20:47:00'),
                                                    (12,11000000,7,'2021-12-6 20:47:00'),
                                                    (2,12000000,7,'2021-12-7 20:47:00'),

                                                    (16,8000000,8,'2021-12-3 20:47:00'),
                                                    (15,9000000,8,'2021-12-4 20:47:00'),
                                                    (14,10000000,8,'2021-12-5 20:47:00'),
                                                    (12,11000000,8,'2021-12-6 20:47:00'),
                                                    (2,12000000,8,'2021-12-7 20:47:00'),

                                                    (16,8000000,9,'2021-12-3 20:47:00'),
                                                    (15,9000000,9,'2021-12-4 20:47:00'),
                                                    (14,10000000,9,'2021-12-5 20:47:00'),
                                                    (12,11000000,9,'2021-12-6 20:47:00'),
                                                    (2,12000000,9,'2021-12-7 20:47:00'),

                                                    (16,8000000,10,'2021-12-3 20:47:00'),
                                                    (15,9000000,10,'2021-12-4 20:47:00'),
                                                    (14,10000000,10,'2021-12-5 20:47:00'),
                                                    (12,11000000,10,'2021-12-6 20:47:00'),
                                                    (2,12000000,10,'2021-12-7 20:47:00'),

                                                    (16,8000000,11,'2021-12-3 20:47:00'),
                                                    (15,9000000,11,'2021-12-4 20:47:00'),
                                                    (14,10000000,11,'2021-12-5 20:47:00'),
                                                    (12,11000000,11,'2021-12-6 20:47:00'),
                                                    (2,12000000,11,'2021-12-7 20:47:00'),

                                                    (16,8000000,12,'2021-12-3 20:47:00'),
                                                    (15,9000000,12,'2021-12-4 20:47:00'),
                                                    (14,10000000,12,'2021-12-5 20:47:00'),
                                                    (12,11000000,12,'2021-12-6 20:47:00'),
                                                    (2,12000000,12,'2021-12-7 20:47:00'),

                                                    (16,8000000,13,'2021-12-3 20:47:00'),
                                                    (15,9000000,13,'2021-12-4 20:47:00'),
                                                    (14,10000000,13,'2021-12-5 20:47:00'),
                                                    (12,11000000,13,'2021-12-6 20:47:00'),
                                                    (2,12000000,13,'2021-12-7 20:47:00'),

                                                    (16,8000000,14,'2021-12-3 20:47:00'),
                                                    (15,9000000,14,'2021-12-4 20:47:00'),
                                                    (14,10000000,14,'2021-12-5 20:47:00'),
                                                    (12,11000000,14,'2021-12-6 20:47:00'),
                                                    (2,12000000,14,'2021-12-7 20:47:00'),

                                                    (16,8000000,15,'2021-12-3 20:47:00'),
                                                    (15,9000000,15,'2021-12-4 20:47:00'),
                                                    (14,10000000,15,'2021-12-5 20:47:00'),
                                                    (12,11000000,15,'2021-12-6 20:47:00'),
                                                    (2,12000000,15,'2021-12-7 20:47:00'),

                                                    (16,8000000,16,'2021-12-3 20:47:00'),
                                                    (15,9000000,16,'2021-12-4 20:47:00'),
                                                    (14,10000000,16,'2021-12-5 20:47:00'),
                                                    (12,11000000,16,'2021-12-6 20:47:00'),
                                                    (2,12000000,16,'2021-12-7 20:47:00'),

                                                    (16,8000000,17,'2021-12-3 20:47:00'),
                                                    (15,9000000,17,'2021-12-4 20:47:00'),
                                                    (14,10000000,17,'2021-12-5 20:47:00'),
                                                    (12,11000000,17,'2021-12-6 20:47:00'),
                                                    (2,12000000,17,'2021-12-7 20:47:00'),

                                                    (16,8000000,18,'2021-12-3 20:47:00'),
                                                    (15,9000000,18,'2021-12-4 20:47:00'),
                                                    (14,10000000,18,'2021-12-5 20:47:00'),
                                                    (12,11000000,18,'2021-12-6 20:47:00'),
                                                    (2,12000000,18,'2021-12-7 20:47:00'),

                                                    (16,8000000,19,'2021-12-3 20:47:00'),
                                                    (15,9000000,19,'2021-12-4 20:47:00'),
                                                    (14,10000000,19,'2021-12-5 20:47:00'),
                                                    (12,11000000,19,'2021-12-6 20:47:00'),
                                                    (2,12000000,19,'2021-12-7 20:47:00'),

                                                    (16,8000000,20,'2021-12-3 20:47:00'),
                                                    (15,9000000,20,'2021-12-4 20:47:00'),
                                                    (14,10000000,20,'2021-12-5 20:47:00'),
                                                    (12,11000000,20,'2021-12-6 20:47:00'),
                                                    (2,12000000,20,'2021-12-7 20:47:00'),

                                                    (16,8000000,21,'2021-12-3 20:47:00'),
                                                    (15,9000000,21,'2021-12-4 20:47:00'),
                                                    (14,10000000,21,'2021-12-5 20:47:00'),
                                                    (12,11000000,21,'2021-12-6 20:47:00'),
                                                    (2,12000000,21,'2021-12-7 20:47:00'),

                                                    (16,8000000,22,'2021-12-3 20:47:00'),
                                                    (15,9000000,22,'2021-12-4 20:47:00'),
                                                    (14,10000000,22,'2021-12-5 20:47:00'),
                                                    (12,11000000,22,'2021-12-6 20:47:00'),
                                                    (2,12000000,22,'2021-12-7 20:47:00'),

                                                    (16,8000000,23,'2021-12-3 20:47:00'),
                                                    (15,9000000,23,'2021-12-4 20:47:00'),
                                                    (14,10000000,23,'2021-12-5 20:47:00'),
                                                    (12,11000000,23,'2021-12-6 20:47:00'),
                                                    (2,12000000,23,'2021-12-7 20:47:00'),

                                                    (16,8000000,24,'2021-12-3 20:47:00'),
                                                    (15,9000000,24,'2021-12-4 20:47:00'),
                                                    (14,10000000,24,'2021-12-5 20:47:00'),
                                                    (12,11000000,24,'2021-12-6 20:47:00'),
                                                    (2,12000000,24,'2021-12-7 20:47:00'),

                                                    (16,8000000,25,'2021-12-3 20:47:00'),
                                                    (15,9000000,25,'2021-12-4 20:47:00'),
                                                    (14,10000000,25,'2021-12-5 20:47:00'),
                                                    (12,11000000,25,'2021-12-6 20:47:00'),
                                                    (2,12000000,25,'2021-12-7 20:47:00'),

                                                    (16,1600000,26,'2021-12-3 20:47:00'),
                                                    (15,2600000,26,'2021-12-4 20:47:00'),
                                                    (14,3600000,26,'2021-12-5 20:47:00'),
                                                    (12,4600000,26,'2021-12-6 20:47:00'),
                                                    (2,5600000,26,'2021-12-7 20:47:00'),


                                                    (16,11600000,27,'2021-12-3 20:47:00'),
                                                    (15,12600000,27,'2021-12-4 20:47:00'),
                                                    (14,13600000,27,'2021-12-5 20:47:00'),
                                                    (12,14600000,27,'2021-12-6 20:47:00'),
                                                    (2,15600000,27,'2021-12-7 20:47:00'),

                                                    (16,21000000,28,'2021-12-3 20:47:00'),
                                                    (15,22000000,28,'2021-12-4 20:47:00'),
                                                    (14,23000000,28,'2021-12-5 20:47:00'),
                                                    (12,24000000,28,'2021-12-6 20:47:00'),
                                                    (2,25000000,28,'2021-12-7 20:47:00'),

                                                    (16,14600000,29,'2021-12-3 20:47:00'),
                                                    (15,15600000,29,'2021-12-4 20:47:00'),
                                                    (14,16600000,29,'2021-12-5 20:47:00'),
                                                    (12,17600000,29,'2021-12-6 20:47:00'),
                                                    (2,18600000,29,'2021-12-7 20:47:00'),

                                                    (16,19600000,30,'2021-12-3 20:47:00'),
                                                    (15,20600000,30,'2021-12-4 20:47:00'),
                                                    (14,21600000,30,'2021-12-5 20:47:00'),
                                                    (12,22600000,30,'2021-12-6 20:47:00'),
                                                    (2,23600000,30,'2021-12-7 20:47:00'),

                                                    (16,21600000,31,'2021-12-3 20:47:00'),
                                                    (15,22600000,31,'2021-12-4 20:47:00'),
                                                    (14,23600000,31,'2021-12-5 20:47:00'),
                                                    (12,24600000,31,'2021-12-6 20:47:00'),
                                                    (2,25600000,31,'2021-12-7 20:47:00'),

                                                    (16,21600000,32,'2021-12-3 20:47:00'),
                                                    (15,22600000,32,'2021-12-4 20:47:00'),
                                                    (14,23600000,32,'2021-12-5 20:47:00'),
                                                    (12,24600000,32,'2021-12-6 20:47:00'),
                                                    (2,25600000,32,'2021-12-7 20:47:00'),

                                                    (16,21600000,33,'2021-12-3 20:47:00'),
                                                    (15,22600000,33,'2021-12-4 20:47:00'),
                                                    (14,23600000,33,'2021-12-5 20:47:00'),
                                                    (12,24600000,33,'2021-12-6 20:47:00'),
                                                    (2,25600000,33,'2021-12-7 20:47:00'),

                                                    (16,21600000,34,'2021-12-3 20:47:00'),
                                                    (15,22600000,34,'2021-12-4 20:47:00'),
                                                    (14,23600000,34,'2021-12-5 20:47:00'),
                                                    (12,24600000,34,'2021-12-6 20:47:00'),
                                                    (2,25600000,34,'2021-12-7 20:47:00'),

                                                    (16,21600000,35,'2021-12-3 20:47:00'),
                                                    (15,22600000,35,'2021-12-4 20:47:00'),
                                                    (14,23600000,35,'2021-12-5 20:47:00'),
                                                    (12,24600000,35,'2021-12-6 20:47:00'),
                                                    (2,25600000,35,'2021-12-7 20:47:00'),

                                                    (16,21600000,36,'2021-12-3 20:47:00'),
                                                    (15,22600000,36,'2021-12-4 20:47:00'),
                                                    (14,23600000,36,'2021-12-5 20:47:00'),
                                                    (12,24600000,36,'2021-12-6 20:47:00'),
                                                    (2,25600000,36,'2021-12-7 20:47:00'),

                                                    (16,21600000,37,'2021-12-3 20:47:00'),
                                                    (15,22600000,37,'2021-12-4 20:47:00'),
                                                    (14,23600000,37,'2021-12-5 20:47:00'),
                                                    (12,24600000,37,'2021-12-6 20:47:00'),
                                                    (2,25600000,37,'2021-12-7 20:47:00'),

                                                    (16,21600000,37,'2021-12-3 20:47:00'),
                                                    (15,22600000,37,'2021-12-4 20:47:00'),
                                                    (14,23600000,37,'2021-12-5 20:47:00'),
                                                    (12,24600000,37,'2021-12-6 20:47:00'),
                                                    (2,25600000,37,'2021-12-7 20:47:00'),

                                                    (16,21600000,38,'2021-12-3 20:47:00'),
                                                    (15,22600000,38,'2021-12-4 20:47:00'),
                                                    (14,23600000,38,'2021-12-5 20:47:00'),
                                                    (12,24600000,38,'2021-12-6 20:47:00'),
                                                    (2,25600000,38,'2021-12-7 20:47:00'),

                                                    (16,21600000,39,'2021-12-3 20:47:00'),
                                                    (15,22600000,39,'2021-12-4 20:47:00'),
                                                    (14,23600000,39,'2021-12-5 20:47:00'),
                                                    (12,24600000,39,'2021-12-6 20:47:00'),
                                                    (2,25600000,39,'2021-12-7 20:47:00'),

                                                    (16,21600000,40,'2021-12-3 20:47:00'),
                                                    (15,22600000,40,'2021-12-4 20:47:00'),
                                                    (14,23600000,40,'2021-12-5 20:47:00'),
                                                    (12,24600000,40,'2021-12-6 20:47:00'),
                                                    (2,25600000,40,'2021-12-7 20:47:00'),

                                                    (16,21600000,41,'2021-12-3 20:47:00'),
                                                    (15,22600000,41,'2021-12-4 20:47:00'),
                                                    (14,23600000,41,'2021-12-5 20:47:00'),
                                                    (12,24600000,41,'2021-12-6 20:47:00'),
                                                    (2,25600000,41,'2021-12-7 20:47:00'),

                                                    (16,21600000,42,'2021-12-3 20:47:00'),
                                                    (15,22600000,42,'2021-12-4 20:47:00'),
                                                    (14,23600000,42,'2021-12-5 20:47:00'),
                                                    (12,24600000,42,'2021-12-6 20:47:00'),
                                                    (2,25600000,42,'2021-12-7 20:47:00'),

                                                    (16,21600000,43,'2021-12-3 20:47:00'),
                                                    (15,22600000,43,'2021-12-4 20:47:00'),
                                                    (14,23600000,43,'2021-12-5 20:47:00'),
                                                    (12,24600000,43,'2021-12-6 20:47:00'),
                                                    (2,25600000,43,'2021-12-7 20:47:00'),

                                                    (16,21600000,44,'2021-12-3 20:47:00'),
                                                    (15,22600000,44,'2021-12-4 20:47:00'),
                                                    (14,23600000,44,'2021-12-5 20:47:00'),
                                                    (12,24600000,44,'2021-12-6 20:47:00'),
                                                    (2,25600000,44,'2021-12-7 20:47:00'),

                                                    (16,21600000,45,'2021-12-3 20:47:00'),
                                                    (15,22600000,45,'2021-12-4 20:47:00'),
                                                    (14,23600000,45,'2021-12-5 20:47:00'),
                                                    (12,24600000,45,'2021-12-6 20:47:00'),
                                                    (2,25600000,45,'2021-12-7 20:47:00'),

                                                    (16,21600000,46,'2021-12-3 20:47:00'),
                                                    (15,22600000,46,'2021-12-4 20:47:00'),
                                                    (14,23600000,46,'2021-12-5 20:47:00'),
                                                    (12,24600000,46,'2021-12-6 20:47:00'),
                                                    (2,25600000,46,'2021-12-7 20:47:00'),

                                                    (16,21600000,47,'2021-12-3 20:47:00'),
                                                    (15,22600000,47,'2021-12-4 20:47:00'),
                                                    (14,23600000,47,'2021-12-5 20:47:00'),
                                                    (12,24600000,47,'2021-12-6 20:47:00'),
                                                    (2,25600000,47,'2021-12-7 20:47:00'),

                                                    (16,21600000,48,'2021-12-3 20:47:00'),
                                                    (15,22600000,48,'2021-12-4 20:47:00'),
                                                    (14,23600000,48,'2021-12-5 20:47:00'),
                                                    (12,24600000,48,'2021-12-6 20:47:00'),
                                                    (2,25600000,48,'2021-12-7 20:47:00'),

                                                    (16,21600000,49,'2021-12-3 20:47:00'),
                                                    (15,22600000,49,'2021-12-4 20:47:00'),
                                                    (14,23600000,49,'2021-12-5 20:47:00'),
                                                    (12,24600000,49,'2021-12-6 20:47:00'),
                                                    (2,25600000,49,'2021-12-7 20:47:00'),

                                                    (16,21600000,50,'2021-12-3 20:47:00'),
                                                    (15,22600000,50,'2021-12-4 20:47:00'),
                                                    (14,23600000,50,'2021-12-5 20:47:00'),
                                                    (12,24600000,50,'2021-12-6 20:47:00'),
                                                    (2,25600000,50,'2021-12-7 20:47:00'),

                                                    (16,21600000,51,'2021-12-3 20:47:00'),
                                                    (15,22600000,51,'2021-12-4 20:47:00'),
                                                    (14,23600000,51,'2021-12-5 20:47:00'),
                                                    (12,24600000,51,'2021-12-6 20:47:00'),
                                                    (2,25600000,51,'2021-12-7 20:47:00'),

                                                    (16,21600000,52,'2021-12-3 20:47:00'),
                                                    (15,23600000,52,'2021-12-4 20:47:00'),
                                                    (14,24600000,52,'2021-12-5 20:47:00'),
                                                    (12,25600000,52,'2021-12-6 20:47:00'),
                                                    (2,26000000,52,'2021-12-7 20:47:00'),

                                                    (16,2100000,53,'2021-12-3 20:47:00'),
                                                    (15,2300000,53,'2021-12-4 20:47:00'),
                                                    (14,2400000,53,'2021-12-5 20:47:00'),
                                                    (12,2500000,53,'2021-12-6 20:47:00'),
                                                    (2,2600000,53,'2021-12-7 20:47:00'),

                                                    (16,2100000,54,'2021-12-3 20:47:00'),
                                                    (15,2300000,54,'2021-12-4 20:47:00'),
                                                    (14,2400000,54,'2021-12-5 20:47:00'),
                                                    (12,2500000,54,'2021-12-6 20:47:00'),
                                                    (2,2600000,54,'2021-12-7 20:47:00'),

                                                    (16,2100000,55,'2021-12-3 20:47:00'),
                                                    (15,2300000,55,'2021-12-4 20:47:00'),
                                                    (14,2400000,55,'2021-12-5 20:47:00'),
                                                    (12,2500000,55,'2021-12-6 20:47:00'),
                                                    (2,2600000,55,'2021-12-7 20:47:00'),

                                                    (16,2100000,56,'2021-12-3 20:47:00'),
                                                    (15,2300000,56,'2021-12-4 20:47:00'),
                                                    (14,2400000,56,'2021-12-5 20:47:00'),
                                                    (12,2500000,56,'2021-12-6 20:47:00'),
                                                    (2,2600000,56,'2021-12-7 20:47:00'),

                                                    (16,2100000,57,'2021-12-3 20:47:00'),
                                                    (15,2300000,57,'2021-12-4 20:47:00'),
                                                    (14,2400000,57,'2021-12-5 20:47:00'),
                                                    (12,2500000,57,'2021-12-6 20:47:00'),
                                                    (2,2600000,57,'2021-12-7 20:47:00'),

                                                    (16,2100000,58,'2021-12-3 20:47:00'),
                                                    (15,2300000,58,'2021-12-4 20:47:00'),
                                                    (14,2400000,58,'2021-12-5 20:47:00'),
                                                    (12,2500000,58,'2021-12-6 20:47:00'),
                                                    (2,2600000,58,'2021-12-7 20:47:00'),

                                                    (16,2100000,59,'2021-12-3 20:47:00'),
                                                    (15,2300000,59,'2021-12-4 20:47:00'),
                                                    (14,2400000,59,'2021-12-5 20:47:00'),
                                                    (12,2500000,59,'2021-12-6 20:47:00'),
                                                    (2,2600000,59,'2021-12-7 20:47:00'),

                                                    (16,2100000,60,'2021-12-3 20:47:00'),
                                                    (15,2300000,60,'2021-12-4 20:47:00'),
                                                    (14,2400000,60,'2021-12-5 20:47:00'),
                                                    (12,2500000,60,'2021-12-6 20:47:00'),
                                                    (2,2600000,60,'2021-12-7 20:47:00'),

                                                    (16,2100000,61,'2021-12-3 20:47:00'),
                                                    (15,2300000,61,'2021-12-4 20:47:00'),
                                                    (14,2400000,61,'2021-12-5 20:47:00'),
                                                    (12,2500000,61,'2021-12-6 20:47:00'),
                                                    (2,2600000,61,'2021-12-7 20:47:00'),

                                                    (16,2100000,62,'2021-12-3 20:47:00'),
                                                    (15,2300000,62,'2021-12-4 20:47:00'),
                                                    (14,2400000,62,'2021-12-5 20:47:00'),
                                                    (12,2500000,62,'2021-12-6 20:47:00'),
                                                    (2,2600000,62,'2021-12-7 20:47:00'),

                                                    (16,2100000,63,'2021-12-3 20:47:00'),
                                                    (15,2300000,63,'2021-12-4 20:47:00'),
                                                    (14,2400000,63,'2021-12-5 20:47:00'),
                                                    (12,2500000,63,'2021-12-6 20:47:00'),
                                                    (2,2600000,63,'2021-12-7 20:47:00'),

                                                    (16,2100000,64,'2021-12-3 20:47:00'),
                                                    (15,2300000,64,'2021-12-4 20:47:00'),
                                                    (14,2400000,64,'2021-12-5 20:47:00'),
                                                    (12,2500000,64,'2021-12-6 20:47:00'),
                                                    (2,2600000,64,'2021-12-7 20:47:00'),

                                                    (16,2100000,65,'2021-12-3 20:47:00'),
                                                    (15,2300000,65,'2021-12-4 20:47:00'),
                                                    (14,2400000,65,'2021-12-5 20:47:00'),
                                                    (12,2500000,65,'2021-12-6 20:47:00'),
                                                    (2,2600000,65,'2021-12-7 20:47:00'),

                                                    (16,2100000,66,'2021-12-3 20:47:00'),
                                                    (15,2300000,66,'2021-12-4 20:47:00'),
                                                    (14,2400000,66,'2021-12-5 20:47:00'),
                                                    (12,2500000,66,'2021-12-6 20:47:00'),
                                                    (2,2600000,66,'2021-12-7 20:47:00'),

                                                    (16,2100000,67,'2021-12-3 20:47:00'),
                                                    (15,2300000,67,'2021-12-4 20:47:00'),
                                                    (14,2400000,67,'2021-12-5 20:47:00'),
                                                    (12,2500000,67,'2021-12-6 20:47:00'),
                                                    (2,2600000,67,'2021-12-7 20:47:00'),

                                                    (16,2100000,68,'2021-12-3 20:47:00'),
                                                    (15,2300000,68,'2021-12-4 20:47:00'),
                                                    (14,2400000,68,'2021-12-5 20:47:00'),
                                                    (12,2500000,68,'2021-12-6 20:47:00'),
                                                    (2,2600000,68,'2021-12-7 20:47:00'),

                                                    (16,2100000,69,'2021-12-3 20:47:00'),
                                                    (15,2300000,69,'2021-12-4 20:47:00'),
                                                    (14,2400000,69,'2021-12-5 20:47:00'),
                                                    (12,2500000,69,'2021-12-6 20:47:00'),
                                                    (2,2600000,69,'2021-12-7 20:47:00'),

                                                    (16,2100000,70,'2021-12-3 20:47:00'),
                                                    (15,2300000,70,'2021-12-4 20:47:00'),
                                                    (14,2400000,70,'2021-12-5 20:47:00'),
                                                    (12,2500000,70,'2021-12-6 20:47:00'),
                                                    (2,2600000,70,'2021-12-7 20:47:00'),

                                                    (16,2100000,71,'2021-12-3 20:47:00'),
                                                    (15,2300000,71,'2021-12-4 20:47:00'),
                                                    (14,2400000,71,'2021-12-5 20:47:00'),
                                                    (12,2500000,71,'2021-12-6 20:47:00'),
                                                    (2,2600000,71,'2021-12-7 20:47:00'),

                                                    (16,2100000,72,'2021-12-3 20:47:00'),
                                                    (15,2300000,72,'2021-12-4 20:47:00'),
                                                    (14,2400000,72,'2021-12-5 20:47:00'),
                                                    (12,2500000,72,'2021-12-6 20:47:00'),
                                                    (2,2600000,72,'2021-12-7 20:47:00'),

                                                    (16,1100000,73,'2021-12-3 20:47:00'),
                                                    (15,1300000,73,'2021-12-4 20:47:00'),
                                                    (14,1400000,73,'2021-12-5 20:47:00'),
                                                    (12,1500000,73,'2021-12-6 20:47:00'),
                                                    (2,1600000,73,'2021-12-7 20:47:00'),

                                                    (16,1100000,74,'2021-12-3 20:47:00'),
                                                    (15,1300000,74,'2021-12-4 20:47:00'),
                                                    (14,1400000,74,'2021-12-5 20:47:00'),
                                                    (12,1500000,74,'2021-12-6 20:47:00'),
                                                    (2,1600000,74,'2021-12-7 20:47:00'),

                                                    (16,1100000,75,'2021-12-3 20:47:00'),
                                                    (15,1300000,75,'2021-12-4 20:47:00'),
                                                    (14,1400000,75,'2021-12-5 20:47:00'),
                                                    (12,1500000,75,'2021-12-6 20:47:00'),
                                                    (2,1600000,75,'2021-12-7 20:47:00'),

                                                    (16,1100000,76,'2021-12-3 20:47:00'),
                                                    (15,1300000,76,'2021-12-4 20:47:00'),
                                                    (14,1400000,76,'2021-12-5 20:47:00'),
                                                    (12,1500000,76,'2021-12-6 20:47:00'),
                                                    (2,1600000,76,'2021-12-7 20:47:00'),

                                                    (16,1100000,77,'2021-12-3 20:47:00'),
                                                    (15,1300000,77,'2021-12-4 20:47:00'),
                                                    (14,1400000,77,'2021-12-5 20:47:00'),
                                                    (12,1500000,77,'2021-12-6 20:47:00'),
                                                    (2,1600000,77,'2021-12-7 20:47:00'),

                                                    (16,1100000,78,'2021-12-3 20:47:00'),
                                                    (15,1300000,78,'2021-12-4 20:47:00'),
                                                    (14,1400000,78,'2021-12-5 20:47:00'),
                                                    (12,1500000,78,'2021-12-6 20:47:00'),
                                                    (2,1600000,78,'2021-12-7 20:47:00'),

                                                    (16,1100000,79,'2021-12-3 20:47:00'),
                                                    (15,1300000,79,'2021-12-4 20:47:00'),
                                                    (14,1400000,79,'2021-12-5 20:47:00'),
                                                    (12,1500000,79,'2021-12-6 20:47:00'),
                                                    (2,1600000,79,'2021-12-7 20:47:00'),

                                                    (16,1100000,80,'2021-12-3 20:47:00'),
                                                    (15,1300000,80,'2021-12-4 20:47:00'),
                                                    (14,1400000,80,'2021-12-5 20:47:00'),
                                                    (12,1500000,80,'2021-12-6 20:47:00'),
                                                    (2,1600000,80,'2021-12-7 20:47:00'),

                                                    (16,1100000,81,'2021-12-3 20:47:00'),
                                                    (15,1300000,81,'2021-12-4 20:47:00'),
                                                    (14,1400000,81,'2021-12-5 20:47:00'),
                                                    (12,1500000,81,'2021-12-6 20:47:00'),
                                                    (2,1600000,81,'2021-12-7 20:47:00'),

                                                    (16,1100000,82,'2021-12-3 20:47:00'),
                                                    (15,1300000,82,'2021-12-4 20:47:00'),
                                                    (14,1400000,82,'2021-12-5 20:47:00'),
                                                    (12,1500000,82,'2021-12-6 20:47:00'),
                                                    (2,1600000,82,'2021-12-7 20:47:00');











/*!40000 ALTER TABLE `history` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `history_AFTER_INSERT` AFTER INSERT ON `history` FOR EACH ROW BEGIN
    declare current float;
    set current = (select product.current from product where product.id = new.product);
    if(new.offer > current) then
        update product set product.holder = new.user, product.current = new.offer where product.id=new.product;
    end if;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `image`
--

DROP TABLE IF EXISTS `image`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `image` (
                         `id` int(11) NOT NULL AUTO_INCREMENT,
                         `image` longtext NOT NULL,
                         `product` int(11) NOT NULL,
                         PRIMARY KEY (`id`),
                         KEY `image-product_idx` (`product`),
                         CONSTRAINT `image-product` FOREIGN KEY (`product`) REFERENCES `product` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=117 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `image`
--

LOCK TABLES `image` WRITE;
/*!40000 ALTER TABLE `image` DISABLE KEYS */;
INSERT INTO `image` (image,product) VALUES ('/public/imgs/phone/1/1.jpg',1),
                                           ('/public/imgs/phone/1/2.jpg',1),
                                           ('/public/imgs/phone/1/3.jpg',1),
                                           ('/public/imgs/phone/1/4.jpg',1),
                                           ('/public/imgs/phone/2/1.jpg',2),
                                           ('/public/imgs/phone/2/2.jpg',2),
                                           ('/public/imgs/phone/2/3.jpg',2),
                                           ('/public/imgs/phone/2/4.jpg',2),
                                           ('/public/imgs/phone/3/1.jpg',3),
                                           ('/public/imgs/phone/3/2.jpg',3),
                                           ('/public/imgs/phone/3/3.jpg',3),
                                           ('/public/imgs/phone/3/4.jpg',3),
                                           ('/public/imgs/phone/3/5.jpg',3),
                                           ('/public/imgs/phone/4/1.jpg',4),
                                           ('/public/imgs/phone/4/2.jpg',4),
                                           ('/public/imgs/phone/4/3.jpg',4),
                                           ('/public/imgs/phone/4/4.jpg',4),
                                           ('/public/imgs/phone/5/1.jpg',5),
                                           ('/public/imgs/phone/5/2.jpg',5),
                                           ('/public/imgs/phone/5/3.jpg',5),
                                           ('/public/imgs/phone/5/4.jpg',5),
                                           ('/public/imgs/phone/5/5.jpg',5),
                                           ('/public/imgs/phone/6/1.jpg',6),
                                           ('/public/imgs/phone/6/2.jpg',6),
                                           ('/public/imgs/phone/6/3.jpg',6),
                                           ('/public/imgs/phone/6/4.jpg',6),
                                           ('/public/imgs/phone/6/5.jpg',6),
                                           ('/public/imgs/phone/7/1.jpg',7),
                                           ('/public/imgs/phone/7/2.jpg',7),
                                           ('/public/imgs/phone/7/3.jpg',7),
                                           ('/public/imgs/phone/7/4.jpg',7),
                                           ('/public/imgs/phone/7/5.jpg',7),
                                           ('/public/imgs/phone/8/1.jpg',8),
                                           ('/public/imgs/phone/8/2.jpg',8),
                                           ('/public/imgs/phone/8/3.jpg',8),
                                           ('/public/imgs/phone/8/4.jpg',8),
                                           ('/public/imgs/phone/8/5.jpg',8),
                                           ('/public/imgs/phone/9/1.jpg',9),
                                           ('/public/imgs/phone/9/2.jpg',9),
                                           ('/public/imgs/phone/9/3.jpg',9),
                                           ('/public/imgs/phone/9/4.jpg',9),
                                           ('/public/imgs/phone/9/5.jpg',9),
                                           ('/public/imgs/phone/10/1.jpg',10),
                                           ('/public/imgs/phone/10/2.jpg',10),
                                           ('/public/imgs/phone/10/3.jpg',10),
                                           ('/public/imgs/phone/10/4.jpg',10),
                                           ('/public/imgs/phone/10/5.jpg',10),
                                           ('/public/imgs/phone/11/1.jpeg',11),
                                           ('/public/imgs/phone/11/2.jpeg',11),
                                           ('/public/imgs/phone/11/3.jpeg',11),
                                           ('/public/imgs/phone/11/4.jpeg',11),
                                           ('/public/imgs/phone/12/1.jpeg',12),
                                           ('/public/imgs/phone/12/2.jpeg',12),
                                           ('/public/imgs/phone/13/1.jpeg',13),
                                           ('/public/imgs/phone/13/2.jpeg',13),
                                           ('/public/imgs/phone/14/1.jpeg',14),
                                           ('/public/imgs/phone/14/2.jpeg',14),
                                           ('/public/imgs/phone/15/1.jpeg',15),
                                           ('/public/imgs/phone/15/2.jpeg',15),
                                           ('/public/imgs/phone/15/3.jpeg',15),
                                           ('/public/imgs/phone/16/1.jpeg',16),
                                           ('/public/imgs/phone/16/2.jpeg',16),
                                           ('/public/imgs/phone/16/3.jpeg',16),
                                           ('/public/imgs/phone/17/1.jpeg',17),
                                           ('/public/imgs/phone/17/2.jpeg',17),
                                           ('/public/imgs/phone/17/3.jpeg',17),
                                           ('/public/imgs/phone/17/4.jpeg',17),
                                           ('/public/imgs/phone/18/1.jpeg',18),
                                           ('/public/imgs/phone/18/2.jpeg',18),
                                           ('/public/imgs/phone/18/3.jpeg',18),
                                           ('/public/imgs/phone/19/1.jpeg',19),
                                           ('/public/imgs/phone/19/2.jpeg',19),
                                           ('/public/imgs/phone/19/3.jpeg',19),
                                           ('/public/imgs/phone/20/1.jpeg',20),
                                           ('/public/imgs/phone/20/2.jpeg',20),
                                           ('/public/imgs/phone/20/3.jpeg',20),
                                           ('/public/imgs/phone/21/1.jpeg',21),
                                           ('/public/imgs/phone/21/2.jpeg',21),
                                           ('/public/imgs/phone/21/3.jpeg',21),
                                           ('/public/imgs/phone/22/1.jpg',22),
                                           ('/public/imgs/phone/22/2.jpg',22),
                                           ('/public/imgs/phone/22/3.jpg',22),
                                           ('/public/imgs/phone/22/4.jpg',22),
                                           ('/public/imgs/phone/23/1.jpeg',23),
                                           ('/public/imgs/phone/23/2.jpeg',23),
                                           ('/public/imgs/phone/24/1.jpeg',24),
                                           ('/public/imgs/phone/24/2.jpeg',24),
                                           ('/public/imgs/phone/25/1.jpeg',25),
                                           ('/public/imgs/phone/25/2.jpeg',25),
                                           ('/public/imgs/phone/25/1.jpeg',26),
                                           ('/public/imgs/phone/25/2.jpeg',26),
                                           ('/public/imgs/laptop/1/1.jpeg',27),
                                           ('/public/imgs/laptop/1/2.jpeg',27),
                                           ('/public/imgs/laptop/1/3.jpeg',27),
                                           ('/public/imgs/laptop/1/4.jpeg',27),
                                           ('/public/imgs/laptop/2/1.jpeg',28),
                                           ('/public/imgs/laptop/2/2.jpeg',28),
                                           ('/public/imgs/laptop/2/3.jpeg',28),
                                           ('/public/imgs/laptop/2/4.jpeg',28),
                                           ('/public/imgs/laptop/2/5.jpeg',28),
                                           ('/public/imgs/laptop/3/1.jpeg',29),
                                           ('/public/imgs/laptop/3/2.jpeg',29),
                                           ('/public/imgs/laptop/3/3.jpeg',29),
                                           ('/public/imgs/laptop/4/1.jpeg',30),
                                           ('/public/imgs/laptop/4/2.jpeg',30),
                                           ('/public/imgs/laptop/4/3.jpeg',30),
                                           ('/public/imgs/laptop/4/4.jpeg',30),
                                           ('/public/imgs/laptop/4/5.jpeg',30),
                                           ('/public/imgs/laptop/5/1.jpeg',31),
                                           ('/public/imgs/laptop/5/2.jpeg',31),
                                           ('/public/imgs/laptop/5/3.jpeg',31),
                                           ('/public/imgs/laptop/6/1.jpeg',32),
                                           ('/public/imgs/laptop/6/2.jpeg',32),
                                           ('/public/imgs/laptop/6/3.jpeg',32),
                                           ('/public/imgs/laptop/7/1.jpeg',33),
                                           ('/public/imgs/laptop/7/2.jpeg',33),
                                           ('/public/imgs/laptop/7/3.jpeg',33),

                                           ('/public/imgs/laptop/8/1.jpeg',34),
                                           ('/public/imgs/laptop/8/2.jpeg',34),
                                           ('/public/imgs/laptop/8/3.jpeg',34),
                                           ('/public/imgs/laptop/9/1.jpeg',35),
                                           ('/public/imgs/laptop/9/2.jpeg',35),
                                           ('/public/imgs/laptop/9/3.jpeg',35),
                                           ('/public/imgs/laptop/10/1.jpeg',36),
                                           ('/public/imgs/laptop/10/2.jpeg',36),
                                           ('/public/imgs/laptop/10/3.jpeg',36),
                                           ('/public/imgs/laptop/11/1.jpeg',37),
                                           ('/public/imgs/laptop/11/2.jpeg',37),
                                           ('/public/imgs/laptop/11/3.jpeg',37),
                                           ('/public/imgs/laptop/11/4.jpeg',37),
                                           ('/public/imgs/laptop/12/1.jpeg',38),
                                           ('/public/imgs/laptop/12/2.jpeg',38),
                                           ('/public/imgs/laptop/12/3.jpeg',38),
                                           ('/public/imgs/laptop/13/1.jpeg',39),
                                           ('/public/imgs/laptop/13/2.jpeg',39),
                                           ('/public/imgs/laptop/13/3.jpeg',39),
                                           ('/public/imgs/laptop/13/4.jpeg',39),
                                           ('/public/imgs/laptop/14/1.jpeg',40),
                                           ('/public/imgs/laptop/14/2.jpeg',40),
                                           ('/public/imgs/laptop/14/3.jpeg',40),
                                           ('/public/imgs/laptop/15/1.jpeg',41),
                                           ('/public/imgs/laptop/15/2.jpeg',41),
                                           ('/public/imgs/laptop/16/1.jpeg',42),
                                           ('/public/imgs/laptop/16/2.jpeg',42),
                                           ('/public/imgs/laptop/16/3.jpeg',42),
                                           ('/public/imgs/laptop/17/1.jpeg',43),
                                           ('/public/imgs/laptop/17/2.jpeg',43),
                                           ('/public/imgs/laptop/17/3.jpeg',43),
                                           ('/public/imgs/laptop/17/4.jpeg',43),
                                           ('/public/imgs/laptop/17/5.jpeg',43),

                                           ('/public/imgs/laptop/18/1.jpeg',44),
                                           ('/public/imgs/laptop/18/2.jpeg',44),
                                           ('/public/imgs/laptop/18/3.jpeg',44),
                                           ('/public/imgs/laptop/19/1.jpeg',45),
                                           ('/public/imgs/laptop/19/2.jpeg',45),
                                           ('/public/imgs/laptop/19/3.jpeg',45),
                                           ('/public/imgs/laptop/20/1.jpeg',46),
                                           ('/public/imgs/laptop/20/2.jpeg',46),

                                           ('/public/imgs/laptop/21/1.jpeg',47),
                                           ('/public/imgs/laptop/21/2.jpeg',47),
                                           ('/public/imgs/laptop/21/3.jpeg',47),
                                           ('/public/imgs/laptop/22/1.jpeg',48),
                                           ('/public/imgs/laptop/22/2.jpeg',48),
                                           ('/public/imgs/laptop/22/3.jpeg',48),
                                           ('/public/imgs/laptop/23/1.jpg',49),
                                           ('/public/imgs/laptop/23/2.jpg',49),
                                           ('/public/imgs/laptop/23/3.jpg',49),
                                           ('/public/imgs/laptop/24/1.jpeg',50),
                                           ('/public/imgs/laptop/24/2.jpeg',50),
                                           ('/public/imgs/laptop/24/3.jpeg',50),
                                           ('/public/imgs/laptop/25/1.jpeg',51),
                                           ('/public/imgs/laptop/25/2.jpeg',51),
                                           ('/public/imgs/laptop/25/3.jpeg',51),
                                           ('/public/imgs/laptop/25/1.jpeg',52),
                                           ('/public/imgs/laptop/25/2.jpeg',52),
                                           ('/public/imgs/laptop/25/3.jpeg',52),

                                           ('/public/imgs/tablet/1/1.jpeg',53),
                                           ('/public/imgs/tablet/1/2.jpeg',53),
                                           ('/public/imgs/tablet/1/3.jpeg',53),
                                           ('/public/imgs/tablet/1/4.jpeg',53),
                                           ('/public/imgs/tablet/2/1.jpeg',54),
                                           ('/public/imgs/tablet/2/2.jpeg',54),
                                           ('/public/imgs/tablet/2/3.jpeg',54),
                                           ('/public/imgs/tablet/2/4.jpeg',54),
                                           ('/public/imgs/tablet/3/1.jpeg',55),
                                           ('/public/imgs/tablet/3/2.jpeg',55),
                                           ('/public/imgs/tablet/3/3.jpeg',55),
                                           ('/public/imgs/tablet/3/4.jpeg',55),
                                           ('/public/imgs/tablet/4/1.jpeg',56),
                                           ('/public/imgs/tablet/4/2.jpeg',56),
                                           ('/public/imgs/tablet/4/3.jpeg',56),
                                           ('/public/imgs/tablet/5/1.jpeg',57),
                                           ('/public/imgs/tablet/5/2.jpeg',57),
                                           ('/public/imgs/tablet/5/3.jpeg',57),
                                           ('/public/imgs/tablet/6/1.jpeg',58),
                                           ('/public/imgs/tablet/6/2.jpeg',58),
                                           ('/public/imgs/tablet/6/3.jpeg',58),
                                           ('/public/imgs/tablet/7/1.jpeg',59),
                                           ('/public/imgs/tablet/7/2.jpeg',59),
                                           ('/public/imgs/tablet/7/3.jpeg',59),
                                           ('/public/imgs/tablet/7/4.jpeg',59),
                                           ('/public/imgs/tablet/8/1.jpeg',60),
                                           ('/public/imgs/tablet/8/2.jpeg',60),
                                           ('/public/imgs/tablet/8/3.jpeg',60),
                                           ('/public/imgs/tablet/9/1.jpeg',61),
                                           ('/public/imgs/tablet/9/2.jpeg',61),
                                           ('/public/imgs/tablet/9/3.jpeg',61),
                                           ('/public/imgs/tablet/9/4.jpeg',61),
                                           ('/public/imgs/tablet/10/1.jpeg',62),
                                           ('/public/imgs/tablet/10/2.jpeg',62),
                                           ('/public/imgs/tablet/10/3.jpeg',62),
                                           ('/public/imgs/smartwatch/1/1.jpeg',63),
                                           ('/public/imgs/smartwatch/1/2.jpeg',63),
                                           ('/public/imgs/smartwatch/1/3.jpeg',63),
                                           ('/public/imgs/smartwatch/2/1.jpeg',64),
                                           ('/public/imgs/smartwatch/2/2.jpeg',64),
                                           ('/public/imgs/smartwatch/2/3.jpeg',64),
                                           ('/public/imgs/smartwatch/2/4.jpeg',64),
                                           ('/public/imgs/smartwatch/3/1.jpeg',65),
                                           ('/public/imgs/smartwatch/3/2.jpeg',65),
                                           ('/public/imgs/smartwatch/3/3.jpeg',65),
                                           ('/public/imgs/smartwatch/3/4.jpeg',65),
                                           ('/public/imgs/smartwatch/4/1.jpeg',66),
                                           ('/public/imgs/smartwatch/4/2.jpeg',66),
                                           ('/public/imgs/smartwatch/4/3.jpeg',66),
                                           ('/public/imgs/smartwatch/4/4.jpeg',66),
                                           ('/public/imgs/smartwatch/5/1.jpeg',67),
                                           ('/public/imgs/smartwatch/5/2.jpeg',67),
                                           ('/public/imgs/smartwatch/5/3.jpeg',67),
                                           ('/public/imgs/smartwatch/5/4.jpeg',67),
                                           ('/public/imgs/smartwatch/6/1.jpeg',68),
                                           ('/public/imgs/smartwatch/6/2.jpeg',68),
                                           ('/public/imgs/smartwatch/6/3.jpeg',68),
                                           ('/public/imgs/smartwatch/7/1.jpeg',69),
                                           ('/public/imgs/smartwatch/7/2.jpeg',69),
                                           ('/public/imgs/smartwatch/7/3.jpeg',69),
                                           ('/public/imgs/smartwatch/7/4.jpeg',69),
                                           ('/public/imgs/smartwatch/8/1.jpeg',70),
                                           ('/public/imgs/smartwatch/8/2.jpeg',70),
                                           ('/public/imgs/smartwatch/8/3.jpeg',70),
                                           ('/public/imgs/smartwatch/8/4.jpeg',70),
                                           ('/public/imgs/smartwatch/9/1.jpeg',71),
                                           ('/public/imgs/smartwatch/9/2.jpeg',71),
                                           ('/public/imgs/smartwatch/9/3.jpeg',71),
                                           ('/public/imgs/smartwatch/9/4.jpeg',71),
                                           ('/public/imgs/smartwatch/10/1.jpeg',72),
                                           ('/public/imgs/smartwatch/10/2.jpeg',72),
                                           ('/public/imgs/smartwatch/10/3.jpeg',72),
                                           ('/public/imgs/smartwatch/10/4.jpeg',72),


                                           ('/public/imgs/ereader/1/1.jpeg',73),
                                           ('/public/imgs/ereader/1/2.jpeg',73),
                                           ('/public/imgs/ereader/1/3.jpeg',73),
                                           ('/public/imgs/ereader/2/1.jpeg',74),
                                           ('/public/imgs/ereader/2/2.jpeg',74),
                                           ('/public/imgs/ereader/2/3.jpeg',74),
                                           ('/public/imgs/ereader/2/4.jpeg',74),
                                           ('/public/imgs/ereader/3/1.jpeg',75),
                                           ('/public/imgs/ereader/3/2.jpeg',75),
                                           ('/public/imgs/ereader/3/3.jpeg',75),
                                           ('/public/imgs/ereader/4/1.jpeg',76),
                                           ('/public/imgs/ereader/4/2.jpeg',76),
                                           ('/public/imgs/ereader/4/3.jpeg',76),
                                           ('/public/imgs/ereader/5/1.jpeg',77),
                                           ('/public/imgs/ereader/5/2.jpeg',77),
                                           ('/public/imgs/ereader/5/3.jpeg',77),
                                           ('/public/imgs/ereader/6/1.jpeg',78),
                                           ('/public/imgs/ereader/6/2.jpeg',78),
                                           ('/public/imgs/ereader/6/3.jpeg',78),
                                           ('/public/imgs/ereader/7/1.jpeg',79),
                                           ('/public/imgs/ereader/7/2.jpeg',79),
                                           ('/public/imgs/ereader/7/3.jpeg',79),
                                           ('/public/imgs/ereader/8/1.jpeg',80),
                                           ('/public/imgs/ereader/8/2.jpeg',80),
                                           ('/public/imgs/ereader/8/3.jpeg',80),
                                           ('/public/imgs/ereader/9/1.jpeg',81),
                                           ('/public/imgs/ereader/9/2.jpeg',81),
                                           ('/public/imgs/ereader/9/3.jpeg',81),
                                           ('/public/imgs/ereader/10/1.jpeg',82),
                                           ('/public/imgs/ereader/10/2.jpeg',82),
                                           ('/public/imgs/ereader/10/3.jpeg',82);
























/*!40000 ALTER TABLE `image` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `otp`
--

DROP TABLE IF EXISTS `otp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `otp` (
                       `id` int(11) NOT NULL AUTO_INCREMENT,
                       `start` datetime DEFAULT CURRENT_TIMESTAMP,
                       `end` datetime DEFAULT NULL,
                       `email` varchar(100) NOT NULL,
                       `otp` varchar(6) NOT NULL,
                       PRIMARY KEY (`id`),
                       KEY `otp-user_idx` (`email`),
                       CONSTRAINT `otp-user` FOREIGN KEY (`email`) REFERENCES `user` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `otp`
--

LOCK TABLES `otp` WRITE;
/*!40000 ALTER TABLE `otp` DISABLE KEYS */;
INSERT INTO `otp` VALUES (2,'2020-01-08 17:40:52','2020-01-08 17:41:52','fourthzerd@gmail.com','389798'),(3,'2020-01-08 17:55:11','2020-01-08 18:10:11','fourthzerd@gmail.com','736408'),(4,'2020-01-08 18:02:20','2020-01-08 18:17:20','fourthzerd@gmail.com','894357'),(5,'2020-01-08 18:05:17','2020-01-08 18:20:17','fourthzerd@gmail.com','846180'),(6,'2020-01-08 18:06:44','2020-01-08 18:21:44','fourthzerd@gmail.com','567845'),(7,'2020-01-08 18:08:54','2020-01-08 18:23:54','fourthzerd@gmail.com','209367'),(8,'2020-01-08 18:10:58','2020-01-08 18:25:58','fourthzerd@gmail.com','835066'),(9,'2020-01-08 23:04:48','2020-01-08 23:19:48','fourthzerd@gmail.com','181402'),(10,'2020-01-09 01:22:53','2020-01-09 01:37:53','fourthzerd@gmail.com','557301'),(11,'2020-01-09 02:43:58','2020-01-09 02:58:58','fourthzerd@gmail.com','508907'),(12,'2020-01-09 03:52:28','2020-01-09 04:07:28','fourthzerd@gmail.com','732621'),(13,'2020-01-09 04:00:55','2020-01-09 04:15:55','fourthzerd@gmail.com','263040'),(14,'2020-01-09 04:33:52','2020-01-09 04:48:52','fourthzerd@gmail.com','833209'),(15,'2020-01-09 05:38:10','2020-01-09 05:53:10','fourthzerd@gmail.com','267001'),(16,'2020-01-09 05:40:11','2020-01-09 05:55:11','fourthzerd@gmail.com','276979'),(17,'2020-01-09 05:45:09','2020-01-09 06:00:09','fourthzerd@gmail.com','676537'),(18,'2020-01-09 06:04:38','2020-01-09 06:19:38','fourthzerd@gmail.com','138923'),(19,'2020-01-09 06:32:31','2020-01-09 06:47:31','fourthzerd@gmail.com','403734'),(20,'2020-01-09 07:36:27','2020-01-09 07:51:27','fourthzerd@gmail.com','795048'),(21,'2020-01-09 16:20:41','2020-01-09 16:35:41','fourthzerd@gmail.com','411315'),(22,'2020-01-09 17:08:24','2020-01-09 17:23:24','fourthzerd@gmail.com','701312'),(23,'2020-01-09 20:58:54','2020-01-09 21:13:54','fourthzerd@gmail.com','891223'),(24,'2020-01-09 21:11:26','2020-01-09 21:26:26','derekzohar@gmail.com','887868'),(25,'2020-01-09 21:12:41','2020-01-09 21:27:41','lena@gmail.com','817086');
/*!40000 ALTER TABLE `otp` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `otp_BEFORE_INSERT` BEFORE INSERT ON `otp` FOR EACH ROW BEGIN
    set new.end = new.start + interval 15 minute;
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `product`
--

DROP TABLE IF EXISTS `product`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `product` (
                           `id` int(11) NOT NULL AUTO_INCREMENT,
                           `name` varchar(45) NOT NULL,
                           `seller` int(11) NOT NULL,
                           `start` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
                           `end` datetime NOT NULL,
                           `cap` float unsigned NOT NULL,
                           `current` float unsigned NOT NULL DEFAULT '0',
                           `increment` float DEFAULT '0',
                           `holder` int(11) DEFAULT NULL,
                           `info` varchar(45) DEFAULT NULL,
                           `bids` int(10) unsigned NOT NULL DEFAULT '0',
                           `description` longtext,
                           `category` int(11) DEFAULT NULL,
                           `image` longtext NOT NULL,
                           `status` varchar(45) DEFAULT NULL,
                           `annoucement`  varchar(300) DEFAULT NULL,
                           PRIMARY KEY (`id`),
                           KEY `product-seller_idx` (`seller`),
                           KEY `product-holder_idx` (`holder`,`info`),
                           KEY `product-category_idx` (`category`),
                           FULLTEXT KEY `name` (`name`,`description`),
                           CONSTRAINT `product-category` FOREIGN KEY (`category`) REFERENCES `category` (`id`),
                           CONSTRAINT `product-seller` FOREIGN KEY (`seller`) REFERENCES `user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `product`
--

LOCK TABLES `product` WRITE;
/*!40000 ALTER TABLE `product` DISABLE KEYS */;
INSERT INTO `product` VALUES (1,'OPPO A15',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0, 5199000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1,'/public/imgs/phone/1/1.jpg','bidding',NULL)
                           , (2, 'OPPO A54',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,4199000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/2/1.jpg','bidding',NULL)
                           , (3, 'OPPO A20',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0, 7199000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/3/1.jpg','bidding',NULL)
                           , (4, 'OPPO A30',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',16500000,6500000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/4/1.jpg','bidding',NULL)
                           , (5, 'Galaxy S21',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/5/1.jpg','bidding',NULL)
                           , (6, 'Galaxy S22',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/6/1.jpg','bidding',NULL)
                           , (7, 'Galaxy S23',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/7/1.jpg','bidding',NULL)
                           , (8, 'Galaxy S24',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/8/1.jpg','bidding',NULL)
                           , (9, 'Galaxy S25',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/9/1.jpg','bidding',NULL)
                           , (10, 'Galaxy S26',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/10/1.jpg','bidding',NULL)
                           , (11, 'Galaxy S27',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/11/1.jpeg','bidding',NULL)
                           , (12, 'Galaxy S28',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/12/1.jpeg','bidding',NULL)
                           , (13, 'Galaxy S29',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/13/1.jpeg','bidding',NULL)
                           , (14, 'Galaxy S30',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/14/1.jpeg','bidding',NULL)
                           , (15, 'Galaxy S31',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/15/1.jpeg','bidding',NULL)
                           , (16, 'Galaxy S32',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/16/1.jpeg','bidding',NULL)
                           , (17, 'Galaxy S33',1,'2021-12-1 20:47:00','2022-3-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/17/1.jpeg','bidding',NULL)
                           , (18, 'Galaxy S34',1,'2021-12-1 20:47:00','2022-4-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/18/1.jpeg','bidding',NULL)
                           , (19, 'Galaxy S35',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/19/1.jpeg','bidding',NULL)
                           , (20, 'Galaxy S36',1,'2021-12-1 20:47:00','2022-3-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/20/1.jpeg','bidding',NULL)
                           , (21, 'Galaxy S37',1,'2021-12-1 20:47:00','2022-3-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/21/1.jpeg','bidding',NULL)
                           , (22, 'Galaxy S38',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/22/1.jpg','bidding',NULL)
                           , (23, 'Galaxy S39',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/23/1.jpeg','bidding',NULL)
                           , (24, 'Galaxy S40',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/24/1.jpeg','bidding',NULL)
                           , (25, 'Galaxy S41',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,12000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/25/1.jpeg','bidding',NULL)
                           , (26, 'Galaxy S100',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,5600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',1, '/public/imgs/phone/25/1.jpeg','bidding',NULL)
                           , (27, 'Dell Vostro 5510
',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,15600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/1/1.jpeg','bidding',NULL)
                           , (28, 'Dell Vostro 3400',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/2/1.jpeg','bidding',NULL)
                           , (29, 'Dell Inspiron 5410',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',28600000,18600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/3/1.jpeg','bidding',NULL)
                           , (30, 'Lenovo Ideapad 3',1,'2021-12-1 20:47:00','2022-5-31 00:00:00',0,23600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/4/1.jpeg','bidding',NULL)
                           , (31, 'Dell Vostro 3500',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/5/1.jpeg','bidding',NULL)
                           , (32, 'Dell Vostro 3510',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/6/1.jpeg','bidding',NULL)
                           , (33, 'Dell Vostro 3520',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/7/1.jpeg','bidding',NULL)
                           , (34, 'Dell Vostro 3530',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',30000000,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/8/1.jpeg','bidding',NULL)
                           , (35, 'Dell Vostro 3540',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/9/1.jpeg','bidding',NULL)
                           , (36, 'Dell Vostro 3550',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/10/1.jpeg','bidding',NULL)
                           , (37, 'Dell Vostro 3560',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/11/1.jpeg','bidding',NULL)
                           , (38, 'Dell Vostro 3570',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/12/1.jpeg','bidding',NULL)
                           , (39, 'Dell Vostro 3580',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/13/1.jpeg','bidding',NULL)
                           , (40, 'Dell Vostro 3590',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/14/1.jpeg','bidding',NULL)
                           , (41, 'Dell Vostro 3600',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/15/1.jpeg','bidding',NULL)
                           , (42, 'Dell Vostro 3610',1,'2021-12-1 20:47:00','2022-3-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/16/1.jpeg','bidding',NULL)
                           , (43, 'Dell Vostro 3620',1,'2021-12-1 20:47:00','2022-2-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/17/1.jpg','bidding',NULL)
                           , (44, 'Dell Vostro 3630',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/18/1.jpeg','bidding',NULL)
                           , (45, 'Dell Vostro 3640',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/19/1.jpeg','bidding',NULL)
                           , (46, 'Dell Vostro 3650',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/20/1.jpeg','bidding',NULL)
                           , (47, 'Dell Vostro 3660',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/21/1.jpeg','bidding',NULL)
                           , (48, 'Dell Vostro 3670',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/22/1.jpeg','bidding',NULL)
                           , (49, 'Dell Vostro 3680',1,'2021-12-1 20:47:00','2022-3-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/23/1.jpg','bidding',NULL)
                           , (50, 'Dell Vostro 3690',1,'2021-12-1 20:47:00','2022-3-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/24/1.jpeg','bidding',NULL),
(51, 'Dell Vostro 36940',1,'2021-12-1 20:47:00','2022-5-1 00:00:00',0,25600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/25/1.jpeg','bidding',NULL),

(52, 'Dell Vostro 36940',1,'2021-12-4 7:10:00','2022-12-4 6:45:00',30000000,26000000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',2, '/public/imgs/laptop/25/1.jpeg','bidding',NULL)
                           ,(53, 'Tablet 1',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/1/1.jpeg','bidding',NULL)
                           ,( 54, 'Tablet 2',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/2/1.jpeg','bidding',NULL)
                           ,( 55, 'Tablet 3',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/3/1.jpeg','bidding',NULL)
                           ,( 56, 'Tablet 4',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/4/1.jpeg','bidding',NULL)
                           ,( 57, 'Tablet 5',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/5/1.jpeg','bidding',NULL)
                           ,( 58, 'Tablet 6',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/6/1.jpeg','bidding',NULL)
                           ,( 59, 'Tablet 7',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/7/1.jpeg','bidding',NULL)
                           ,( 60, 'Tablet 8',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/8/1.jpeg','bidding',NULL)
                           ,( 61, 'Tablet 9',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/9/1.jpeg','bidding',NULL)
                           ,( 62, 'Tablet 10',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',3, '/public/imgs/tablet/10/1.jpeg','bidding',NULL)
                           ,( 63, 'Smart Watch 1',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/1/1.jpeg','bidding',NULL)
                           ,( 64, 'Smart Watch 2',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/2/1.jpeg','bidding',NULL)
                           ,( 65, 'Smart Watch 3',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/3/1.jpeg','bidding',NULL)
                           ,( 66, 'Smart Watch 4',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/4/1.jpeg','bidding',NULL)
                           ,( 67, 'Smart Watch 5',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/5/1.jpeg','bidding',NULL)
                           ,( 68, 'Smart Watch 6',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/6/1.jpeg','bidding',NULL)
                           ,( 69, 'Smart Watch 7',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/7/1.jpeg','bidding',NULL)
                           ,( 70, 'Smart Watch 8',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/8/1.jpeg','bidding',NULL)
                           ,( 71, 'Smart Watch 9',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/9/1.jpeg','bidding',NULL)
                           ,( 72, 'Smart Watch 10',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,2600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',4, '/public/imgs/smartwatch/10/1.jpeg','bidding',NULL)
                           ,( 73, 'E Reader 1',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/1/1.jpeg','bidding',NULL)
                           ,( 74, 'E Reader 2',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/2/1.jpeg','bidding',NULL)
                           ,( 75, 'E Reader 3',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/3/1.jpeg','bidding',NULL)
                           ,( 76, 'E Reader 4',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/4/1.jpeg','bidding',NULL)
                           ,( 77, 'E Reader 5',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/5/1.jpeg','bidding',NULL)
                           ,( 78, 'E Reader 6',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/6/1.jpeg','bidding',NULL)
                           ,( 79, 'E Reader 7',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/7/1.jpeg','bidding',NULL)
                           ,( 80, 'E Reader 8',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/8/1.jpeg','bidding',NULL)
                           ,( 81, 'E Reader 9',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/9/1.jpeg','bidding',NULL)
                           ,( 82, 'E Reader 10',1,'2021-12-4 7:10:00','2022-6-4 6:45:00',10000000,1600000,0,2,'Derek Zohar',5,'<p>The Mona Lisa might have the most iconic smile in history, but one could argue the yellow smiley face comes',5, '/public/imgs/ereader/10/1.jpeg','bidding',NULL);







/*!40000 ALTER TABLE `product` ENABLE KEYS */;
UNLOCK TABLES;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
/*!50003 CREATE*/ /*!50017 DEFINER=`root`@`localhost`*/ /*!50003 TRIGGER `product_AFTER_UPDATE` BEFORE UPDATE ON `product` FOR EACH ROW BEGIN
    IF new.end < old.start THEN
        BEGIN
            SIGNAL SQLSTATE '45000'
                SET MESSAGE_TEXT = 'Invalid end date!';
        END;
    END IF;
    IF (old.status = new.status and old.status <> 'bidding') THEN
        BEGIN
            SIGNAL SQLSTATE '45000'
                SET MESSAGE_TEXT = 'Bidding expires!';
        END;
    END IF;
    IF new.current >= old.cap THEN
        BEGIN
            set new.current = old.cap;
            set new.status = 'sold';
        END;
    END IF;
    set new.info = (select name from user where user.id = new.holder);
    set new.bids = (select count(*) from history where history.product=new.id);
END */;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Table structure for table `sessions`
--

DROP TABLE IF EXISTS `sessions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sessions` (
                            `session_id` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
                            `expires` int(11) unsigned NOT NULL,
                            `data` text CHARACTER SET utf8mb4 COLLATE utf8mb4_bin,
                            PRIMARY KEY (`session_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sessions`
--

LOCK TABLES `sessions` WRITE;
/*!40000 ALTER TABLE `sessions` DISABLE KEYS */;
INSERT INTO `sessions` VALUES ('aWFoc4uJJbi3PUjHM-XWDGg6AfWW1bRE',1578584856,'{\"cookie\":{\"originalMaxAge\":3600000,\"expires\":\"2020-01-09T14:58:50.917Z\",\"secure\":false,\"httpOnly\":true,\"path\":\"/\"},\"authenticated\":true,\"user\":{\"id\":3,\"name\":\"Lena\",\"email\":\"lena@gmail.com\",\"privilege\":\"admin\",\"rating\":8.3}}');
/*!40000 ALTER TABLE `sessions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user`
--

DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `user` (
                        `id` int(11) NOT NULL AUTO_INCREMENT,
                        `name` varchar(100) NOT NULL,
                        `email` varchar(100) NOT NULL,
                        `password` varchar(255) NOT NULL,
                        `privilege` varchar(45) DEFAULT NULL,
                        `rating` float DEFAULT NULL,
                        `request` varchar(15) DEFAULT NULL,
                        `address` nvarchar(100) DEFAULT NULL,
                        PRIMARY KEY (`id`),
                        UNIQUE KEY `email_UNIQUE` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user`
--
LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES (1,'Erod Nelps','erodnelps@gmail.com','$2a$10$PFlKvjXDXnF9xkgFCn8XEu02WSlIswunEqCPm6r9sjwweniDPTc/y','bidder',8.3, NULL,NULL),(2,'Derek Zohar','derekzohar@gmail.com','$2a$10$HLXCmxXJAziwS5I0RUIgSeyF4FgIedu4hoKtQZR1AN6z/M9qCv/L.','seller',8.2,NULL,NULL),(3,'Lena','lena@gmail.com','$2a$10$jZUexXSHXxLEKJQOT1yUD.1DR8v9LIE1JaXJaCXzA.j/0yAQqvIyO','admin',8.3,NULL,NULL),(12,'Zerd','fourthzerd@gmail.com','$2a$10$4nKjydizzQ4CqAT5Krm1MOIPSJdBAD1.YDRWzCa0PkJeYmW9E973C','bidder',8.2,NULL,NULL);
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;


--
-- Dumping events for database 'auction'
--
/*!50106 SET @save_time_zone= @@TIME_ZONE */ ;
/*!50106 DROP EVENT IF EXISTS `Refresh_Product` */;
DELIMITER ;;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;;
/*!50003 SET character_set_client  = utf8mb4 */ ;;
/*!50003 SET character_set_results = utf8mb4 */ ;;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;;
/*!50003 SET @saved_time_zone      = @@time_zone */ ;;
/*!50003 SET time_zone             = 'SYSTEM' */ ;;
/*!50106 CREATE*/ /*!50117 DEFINER=`root`@`localhost`*/ /*!50106 EVENT `e_store_ts` ON SCHEDULE EVERY 1 HOUR STARTS '2020-01-09 21:44:10' ON COMPLETION NOT PRESERVE ENABLE DO call Refresh() */ ;;
/*!50003 SET time_zone             = @saved_time_zone */ ;;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;;
/*!50003 SET character_set_client  = @saved_cs_client */ ;;
/*!50003 SET character_set_results = @saved_cs_results */ ;;
/*!50003 SET collation_connection  = @saved_col_connection */ ;;
DELIMITER ;
/*!50106 SET TIME_ZONE= @save_time_zone */ ;

--
-- Dumping routines for database 'auction'
--
/*!50003 DROP PROCEDURE IF EXISTS `Refresh` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `Refresh`()
BEGIN
    update product set status = 'sold' where end < now() and status = 'bidding' and bids > 0;
    update product set status = 'expired' where end < now() and status = 'bidding' and bids = 0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UpdateHistory` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `UpdateHistory`(user int, product int, offer float)
BEGIN
    declare host int;
    set host = (select automation.user from automation where automation.user <> user and automation.product= product and automation.offer > offer order by automation.offer desc limit 1);
    if(host) then
        begin
            declare increment float;
            set increment = (select product.increment from product where product.id=product);
            insert into history (user, offer, product) values (host, offer + increment, product);
        end;
    end if;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;


DROP TABLE IF EXISTS `watchlist`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `watchlist` (
                             `user` int(11) NOT NULL AUTO_INCREMENT,
                             `product` int(11) DEFAULT NULL,
                             KEY `fk_watchlist_user_idx` (`user`),
                             KEY `fk_watchlist_product_idx` (`product`),
                             CONSTRAINT `fk_watchlist_product` FOREIGN KEY (`product`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
                             CONSTRAINT `fk_watchlist_user` FOREIGN KEY (`user`) REFERENCES `user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
/*!40101 SET character_set_client = @saved_cs_client */;


--
-- Dumping data for table `watchlist`
--

--
-- Dumping events for database 'auction'
--
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;

/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2020-01-09 22:01:00
